// 設置合適的緩衝區大小
static char statsBuffer[1024];

void GetRunTimeStats() {
  // 調用 FreeRTOS 函數，獲取任務運行統計
  vTaskGetRunTimeStats(statsBuffer);

  // 將統計數據轉換成字符串格式
  String stats = String(statsBuffer);

  // 依據換行符分割並逐行讀取統計數據
  int start = 0;
  int end = stats.indexOf('\n');
  int count = 0;
  while (end != -1 && count < 3) {
    String line = stats.substring(start, end);
    // 找出百分比的位置，該位置由最後一個制表符隔開
    int percentIndex = line.lastIndexOf('\t') + 1;
    String percentStr = line.substring(percentIndex);
    percentStr.trim();
    percentStr.replace("%", "");
    int percent = percentStr.toInt();
    if (percent >= 1) {
      Serial.println(line);
      count++;
    }
    start = end + 1;
    end = stats.indexOf('\n', start);
  }
}
